## ساخت بک اند برای لینک اشتراک ربات CFW

در این ریپپو، چگونگی ایجاد لینک بک اند اشتراک خود برای لینکهای اشتراک ربات CFW-BOT را آموزش می دهم. و همجنین سعی میکنم تا بک اندی که در فایل `ips.txt` هست رو به روز رسانی کنم. ولی توجه داشته باشید با توجه به پابلیک بودن این ریپو حتما توسط فیلتر چی دائما فیلتر میشه.

می توانید ربات را از این صفحه نصب کنید:
[اینجا](https://github.com/2ri4eUI/CFW-BOT)

## آموزش
شما از هر روشی میتونید برای پیدا کردن آی پی استفاده کنید، من از روشی را که نتیجه بهتری گرفتم را توضیح میدم.

1. برای شروع باید یک اکانت رایگان در  [اینجا](https://fofa.info) ثبت نام کنید. می توانید از Gmail خود استفاده کنید، فقط ابتدا زبان را به انگلیسی تغییر دهید.

![تصویر](https://github.com/2ri4eUI/CFW_Worker_Sub/assets/139592104/46796f15-8d68-4fef-9ebc-6be2984edce2)

2. برای جستجوی آی‌پی‌هایی که در سرورهای Cloudflare هستند، از این فرمت کوئری میتوانید استفاده کنید:


```bash
server=="cloudflare" && port=="443" && country=="NL" && city=="Amsterdam"
```
می‌توانید از  پورت، کشور و شهر مورد نظر خودتون  استفاده کنید، گزینه‌های بی‌نهایتی وجود دارد و البته کوئریهای زیادی برای اینکار وجود دارند با آزمون و خطا میتونید نتایج بهتری بگیرید.

3. نمایش آی‌پی‌ها را به ماه گذشته تغییر دهید، این باعث افزایش فرصت پیدا کردن آی‌پی های قابل استفاده بیشتر می شود.
   ![image](https://github.com/2ri4eUI/CFW_Worker_Sub/assets/139592104/94ebe172-ddf7-4673-9529-c6f734d4b991)


4.نتایج جستجوی خود را دانلود کنید، دانلود شما در personal center خواهد بود [اینجا](https://en.fofa.info/userInfo/downloadRecords)

5.ستون آی‌پی فایل CSV دانلود شده خود را کپی کنید و از ابزار هر ابزار تست سرعتی کلادفلر که میخواید استفاده کنید تا بهترین آی پی ها رو پیدا کنید.

## یکی از ابزارهای تست سرعت کلودفلر
1.من از این ابزار استفاده می کنم CloudflareSpeedTest، برای سیستم عامل خود آن را دانلود کنید.

2.آی‌پی‌هایی که در فایل CSV خود دانلود کرده‌اید را در پوشه Cloudflarespeedtest در فایل ip.txt کپی کنید

3.ترمینال را باز کرده و ./CloudflareST.exe را اجرا کنید اگر از ویندوز استفاده می کنید. برای اطلاعات بیشتر در مورد نحوه استفاده از آن، داکیومنت رو از گیتهاب خود پروژه بخونید.

4.بعد از پایان تست آی پی هایی که سرعت بهتری دارند را در ترمینال نشان می دهد و یک فایل result.csv ایجاد می کند. از آی‌پی هایی که بهترین سرعت را دارند استفاده کنید.

![image](https://github.com/2ri4eUI/CFW_Worker_Sub/assets/139592104/f8ff60fb-9b67-4e4e-947b-fa485d859f0b)

## ایجاد بک اند اشتراک CFW (IP_API)
1.برای اطلاعات بیشتر در مورد ربات CFW-BOT به [اینجا](https://github.com/2ri4eUI/CFW-BOT) برید.

2.یک فایل متنی در هر سرویسی که میتواند برای شما لینک عمومی ایجاد بسازید. برای این آموزش من از گیت هاب استفاده می کنم.

3.یک فایل .txt با نام دلخواه خود ایجاد کنید.

4.هر آی‌پی باید در خط جداگانه باشد، می توانید از فایل ips.txt در این ریپو به عنوان راهنما استفاده کنید.

5.اگر پورتی برای آیپی تعیین نکنید. از پورت 443 به عنوان پورت پیش فرض استفاده خواهد شد. الگوی زیر را استفاده کنید :
```bash
ip:port#اسم کانفیگ
```

6.فایل را ذخیره کنید و پیوند خام فایل .txt خود را دریافت کنید، فقط روی RAW در بالای فایل کلیک کنید و لینک آن را از مرورگر خود کپی کنید.

7.به ربات بروید و دکمه‌ی Subscription ips را انتخاب کنید


   ![image](https://github.com/2ri4eUI/CFW_Worker_Sub/assets/139592104/88cbdc47-4035-4c40-83be-b1c8144258d0)



8.دکمه change را انتخاب کنید و لینک RAW فایل خود را وارد کنید.

   ![image](https://github.com/2ri4eUI/CFW_Worker_Sub/assets/139592104/434228b5-e677-4955-9d98-50cd8f3c7da8)



انجام شد🎉. از این به بعد، هر کاربری که میسازید بک-اند جدید و اختصاصی شما را برای ساخت ورکر لینک اشتراک استفاده میکند. 

## به روز رسانی لینک اشتراک با آی پی های جدید 
برای دریافت به روزرسانی ها در بک اند IP_API، فقط کافی لینک ااشتراکتون رو در برنامه ای که با آن به کانفیگها متصل میشید به روز رسانی کنید (تمام برنامه ها مانند v2rayng یا هر برنامه دیگری که استفاده می کنید، این گزینه را دارند). تغییرات انجام شده در فایل بک اند معمولاً بعد از 3 تا 5 دقیقه در لینک اشتراک قابل استفاده میشوند.
